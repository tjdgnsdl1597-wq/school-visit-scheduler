<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>일정 관리 - 방문 일정 대시보드</title>

  <!-- 폰트 & 스타일 -->
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;500;700&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <header class="topbar">
    <div class="brand">
      <div class="logo"></div>
      <h1>인천광역시학교안전공제회 산업안전팀</h1>
    </div>
    <nav class="nav">
      <a href="index.html">한눈에보기</a>
      <a href="#">학교정리</a>
      <a href="schedule.html" class="active">일정관리</a>
      <a href="#">업무관리</a>
      <a href="#" class="disabled">교육자료</a>
      <a href="#" class="disabled">안전보건표지</a>
    </nav>
    <div class="search-box">
      <input type="text" placeholder="검색" />
      <button class="search-btn"></button>
    </div>
  </header>

  <main class="container schedule-container">
    <section class="main-content">
      <h2 class="page-title">내 일정 확인 및 신규 등록</h2>
      <div id="schedule-calendar"></div>
    </section>

    <aside class="sidebar schedule-sidebar">
      <section class="panel">
        <h3 class="panel-title">일정 정보 입력</h3>
        <form id="schedule-form">
          <div class="form-group">
            <label for="visit-date">방문 날짜</label>
            <input type="date" id="visit-date" required />
          </div>

          <div class="form-group">
            <label for="school-select">학교명</label>
            <select id="school-select" required>
              <option value="">학교를 선택하세요</option>
            </select>
          </div>

          <div class="form-group">
            <label for="period">시간대</label>
            <select id="period">
              <option value="">전체</option>
              <option value="AM">오전</option>
              <option value="PM">오후</option>
            </select>
          </div>

          <div class="form-group-inline">
            <div class="form-group">
              <label for="start-time">시작 시간</label>
              <select id="start-time" required></select>
            </div>
            <div class="form-group">
              <label for="end-time">종료 시간</label>
              <select id="end-time" required></select>
            </div>
          </div>

          <div class="form-group">
            <label>방문 목적 (중복 가능)</label>
            <div id="purpose-list" class="purpose-list">
              <div class="checkbox-group"><input type="checkbox" id="p1" value="월점검" /><label for="p1">월점검</label></div>
              <div class="checkbox-group"><input type="checkbox" id="p2" value="위험성평가" /><label for="p2">위험성평가</label></div>
              <div class="checkbox-group"><input type="checkbox" id="p3" value="근골조사" /><label for="p3">근골조사</label></div>
              <div class="checkbox-group"><input type="checkbox" id="p4" value="산업재해" /><label for="p4">산업재해</label></div>
              <div class="checkbox-group"><input type="checkbox" id="p5" value="교육" /><label for="p5">교육</label></div>
              <div class="sub-input"><input type="text" id="edu-type" placeholder="교육 종류 (예: 관리감독자 교육)" /></div>
              <div class="checkbox-group"><input type="checkbox" id="p6" value="기타" /><label for="p6">기타</label></div>
              <div class="sub-input"><input type="text" id="etc-purpose" placeholder="기타 목적 내용" /></div>
            </div>
          </div>

          <p id="form-message" class="form-message"></p>

          <div class="form-actions">
            <button type="submit" class="btn-primary">일정 저장</button>
            <button type="reset" class="btn-secondary">초기화</button>
          </div>
        </form>
      </section>
    </aside>
  </main>

  <!-- ===== JS 로드 순서 중요! body 끝에서 한 번만 ===== -->
  <!-- FullCalendar 먼저 -->
  <script src="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.11/index.global.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/@fullcalendar/core@6.1.11/locales/ko.global.min.js"></script>

  <!-- Supabase UMD 다음 -->
  <script src="https://unpkg.com/@supabase/supabase-js@2.45.4/dist/umd/supabase.min.js"></script>

  <!-- 전역 App, 그다음 페이지 스크립트 -->
  <script src="app.js"></script>
  <script src="schedule.js"></script>
</body>
</html>
